---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;

const labels = {
  about: "About Me",
  projects: "Projects",
  experience: "Experience",
  education: "Education"
};
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <nav class="hidden md:block max-w-7xl mx-auto px-8 py-4">
    <ul class="flex items-center gap-8 justify-center">
      <li><a href="#about" class="text-gray-700 hover:text-black transition-colors font-medium">{labels.about}</a></li>
      {hasProjects && <li><a href="#projects" class="text-gray-700 hover:text-black transition-colors font-medium">{labels.projects}</a></li>}
      {hasExperience && <li><a href="#experience" class="text-gray-700 hover:text-black transition-colors font-medium">{labels.experience}</a></li>}
      {hasEducation && <li><a href="#education" class="text-gray-700 hover:text-black transition-colors font-medium">{labels.education}</a></li>}
    </ul>
  </nav>
  <div class="md:hidden flex items-center justify-end px-6 py-4">
    <button id="mobile-menu-btn" class="flex flex-col justify-center items-center w-10 h-10 gap-1.5 z-50" aria-label="Menu">
      <span class="hamburger-line w-6 h-0.5 bg-gray-700 rounded-full transition-all duration-300"></span>
      <span class="hamburger-line w-6 h-0.5 bg-gray-700 rounded-full transition-all duration-300"></span>
      <span class="hamburger-line w-4 h-0.5 bg-gray-700 rounded-full transition-all duration-300 ml-auto"></span>
    </button>
  </div>
  <div id="mobile-menu" class="md:hidden fixed inset-0 z-40 pointer-events-none opacity-0 transition-opacity duration-300 bg-white/95 backdrop-blur-sm">
    <nav class="flex flex-col items-center justify-center h-full gap-8">
      <a href="#about" class="mobile-nav-link text-2xl font-medium text-gray-800 hover:text-gray-600 transition-colors">{labels.about}</a>
      {hasProjects && <a href="#projects" class="mobile-nav-link text-2xl font-medium text-gray-800 hover:text-gray-600 transition-colors">{labels.projects}</a>}
      {hasExperience && <a href="#experience" class="mobile-nav-link text-2xl font-medium text-gray-800 hover:text-gray-600 transition-colors">{labels.experience}</a>}
      {hasEducation && <a href="#education" class="mobile-nav-link text-2xl font-medium text-gray-800 hover:text-gray-600 transition-colors">{labels.education}</a>}
    </nav>
  </div>
</header>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const lines = btn?.querySelectorAll('.hamburger-line');
  let isOpen = false;
  function toggleMenu() {
    isOpen = !isOpen;
    if (isOpen) {
      menu?.classList.remove('pointer-events-none', 'opacity-0');
      menu?.classList.add('pointer-events-auto', 'opacity-100');
      document.body.style.overflow = 'hidden';
      if (lines && lines.length >= 3) {
        (lines[0] as HTMLElement).style.transform = 'rotate(45deg) translate(4px, 4px)';
        (lines[1] as HTMLElement).style.opacity = '0';
        (lines[2] as HTMLElement).style.transform = 'rotate(-45deg) translate(4px, -4px)';
        (lines[2] as HTMLElement).style.width = '1.5rem';
      }
    } else {
      menu?.classList.add('pointer-events-none', 'opacity-0');
      menu?.classList.remove('pointer-events-auto', 'opacity-100');
      document.body.style.overflow = '';
      if (lines && lines.length >= 3) {
        (lines[0] as HTMLElement).style.transform = '';
        (lines[1] as HTMLElement).style.opacity = '1';
        (lines[2] as HTMLElement).style.transform = '';
        (lines[2] as HTMLElement).style.width = '1rem';
      }
    }
  }
  btn?.addEventListener('click', toggleMenu);
  document.querySelectorAll('.mobile-nav-link').forEach(link => {
    link.addEventListener('click', () => { if (isOpen) toggleMenu(); });
  });
  window.addEventListener('scroll', () => {
    const header = document.getElementById('header');
    if (window.scrollY > 100) {
      header?.classList.add('bg-white/80', 'backdrop-blur-sm');
    } else {
      header?.classList.remove('bg-white/80', 'backdrop-blur-sm');
    }
  });
</script>

<style>
  html { scroll-behavior: smooth; }
</style>
